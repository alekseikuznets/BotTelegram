import telebot
import requests
from translate import Translator

bot = telebot.TeleBot('—Ç–æ–∫–µ–Ω —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞')
API = 'API —Ç–æ–∫–µ–Ω –¥–ª—è —Å–∞–π—Ç–∞ —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º –ø–æ–≥–æ–¥—ã'

@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id, f'–ü—Ä–∏–≤–µ—Ç, —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –≥–æ—Ä–æ–¥–∞')

@bot.message_handler(commands=['today'])
@bot.message_handler(commands=['tomorrow'])
@bot.message_handler(commands=['week'])
def error(message):
    pass

@bot.message_handler(content_types=['text'])
def get_weather(message):
    '''
    –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≥–æ—Ä–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å–∫–æ–ª—å–∫–æ –≥—Ä–∞–¥—É—Å–æ–≤ –∏ —Å–æ–≤–µ—Ç—É–µ—Ç —á—Ç–æ –Ω–∞–¥–µ—Ç—å
    '''
    translator = Translator(to_lang="en")
    city = translator.translate(str(message.text.strip().lower()))
    res = requests.get(f'https://api.openweathermap.org/data/2.5/weather?q={city}&appid={API}&units=metric')
    if res.status_code == 200:
        data = res.json()
        temp = data["main"]["temp"]
        bot.send_message(message.chat.id, f'–ù–∞ —É–ª–∏—Ü–µ: {round(temp)}¬∞C')
        —Ålothe(message, temp)
    else:
        bot.send_message(message.chat.id,'–≥–æ—Ä–æ–¥ —É–∫–∞–∑–∞–Ω –Ω–µ –≤–µ—Ä–Ω–æ')

def —Ålothe(message,temp):
    '''
    –§—É–Ω–∫—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á—Ç–æ –Ω–∞–¥–µ—Ç—å
    '''
    if temp < -25: bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è –º–æ—Ä–æ–∑‚ùÑÔ∏è\n'
                                         f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–¢–µ–ø–ª—É—é –∑–∏–º–Ω—é—é –∫—É—Ä—Ç–∫—É\n–£—Ç–µ–ø–ª–µ–Ω–Ω—ã–µ –±–æ—Ç–∏–Ω–∫–∏\n–¢–µ–ø–ª—É—é —à–∞–ø–∫—É –∏–ª–∏ –≤–∞—Ä–µ–∂–∫–∏\n–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–∏—Ç—å —Å—Ç–æ–ø–∫—É –≤–æ–¥–∫–∏ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º')
    elif 25 <= temp <= -15:
       bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è –º–æ—Ä–æ–∑‚ùÑÔ∏è\n'
                                         f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–¢–µ–ø–ª—É—é –∑–∏–º–Ω—é—é –∫—É—Ä—Ç–∫—É\n–£—Ç–µ–ø–ª–µ–Ω–Ω—ã–µ –±–æ—Ç–∏–Ω–∫–∏\n–¢–µ–ø–ª—É—é —à–∞–ø–∫—É –∏–ª–∏ –≤–∞—Ä–µ–∂–∫–∏')
    elif -15 < temp <= -5:
        bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è —Ö–æ–ª–æ–¥–Ω–æ‚ùÑÔ∏è\n'
                                          f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–ó–∏–º–Ω—é—é –∫—É—Ä—Ç–∫—É –∏–ª–∏ –ø—É—Ö–æ–≤–∏–∫\n–£—Ç–µ–ø–ª–µ–Ω–Ω—ã–µ –±–æ—Ç–∏–Ω–∫–∏ –∏–ª–∏ —Å–∞–ø–æ–≥–∏\n–®–∞–ø–∫—É\n–í–∞—Ä–µ–∂–∫–∏ –∏–ª–∏ –ø–µ—Ä—á–∞—Ç–∫–∏')
    elif -5 < temp <= 5:
        bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è —Ö–æ–ª–æ–¥–Ω–æ‚òÅÔ∏è\n'
                                          f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–¢–µ–ø–ª—É—é –∫—É—Ä—Ç–∫—É –∏–ª–∏ –ø–∞–ª—å—Ç–æ\n–û–±—É–≤—å –Ω–∞ —Ç–µ–ø–ª–æ–π –ø–æ–¥–æ—à–≤–µ (–±–æ—Ç–∏–Ω–∫–∏ –∏–ª–∏ –ø–æ–ª—É–±–æ—Ç–∏–Ω–∫–∏)\n–®–∞–ø–∫–∞ –∏–ª–∏ —É—à–∞–Ω–∫–∞\n–ü–µ—Ä—á–∞—Ç–∫–∏ –∏–ª–∏ –≤–∞—Ä–µ–∂–∫–∏')
    elif 5 < temp <= 15:
        bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è —Ö–æ–ª–æ–¥–Ω–æ–≤–∞—Ç–æüå•\n'
                                          f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–õ–µ–≥–∫—É—é –∫—É—Ä—Ç–∫–∞ –∏–ª–∏ –≤–µ—Ç—Ä–æ–≤–∫–∞\n–î–µ–º–∏—Å–µ–∑–æ–Ω–Ω—É—é –æ–±—É–≤—å (–±–æ—Ç–∏–Ω–∫–∏ –∏–ª–∏ –∫–µ–¥—ã)\n–®–∞–ø–∫—É –∏–ª–∏ –ª–µ–≥–∫–∏–π –≥–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä')
    elif 15 < temp <= 25:
        bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è —Ç–µ–ø–ª–æ‚òÄÔ∏è\n'
                                          f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–§—É—Ç–±–æ–ª–∫—É, —Ä—É–±–∞—à–∫—É –∏–ª–∏ –±–ª—É–∑–∫—É\n–õ–µ–≥–∫–∏–µ –±—Ä—é–∫–∏ –∏–ª–∏ —é–±–∫–∞\n–õ–µ–≥–∫–∞—è –æ–±—É–≤—å (—Ç—É—Ñ–ª–∏, —Å–∞–Ω–¥–∞–ª–∏–∏, –∫–µ–¥—ã)')
    elif 25 < temp:
        bot.send_message(message.chat.id, f'–°–µ–≥–æ–¥–Ω—è –∂–∞—Ä–∫–æ‚òÄÔ∏è\n'
                                          f'–°–æ–≤–µ—Ç—É—é –Ω–∞–¥–µ—Ç—å:\n–õ–µ–≥–∫—É—é –æ–¥–µ–∂–¥—É (–ø–ª–∞—Ç—å–µ, —Ñ—É—Ç–±–æ–ª–∫–∞, —à–æ—Ä—Ç—ã)\n–õ–µ–≥–∫—É –æ–±—É–≤—å (—Å–∞–Ω–¥–∞–ª–∏–∏, —Ç–∞–ø–æ—á–∫–∏, –∫–µ–¥—ã)')

bot.polling(none_stop=True)






